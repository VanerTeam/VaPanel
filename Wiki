<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: #24292e;
            background-color: #fff;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
        }
        h1 {
            font-size: 2em;
            border-bottom: 1px solid #eaecef;
            padding-bottom: 0.3em;
        }
        h2 {
            font-size: 1.5em;
            border-bottom: 1px solid #eaecef;
            padding-bottom: 0.3em;
        }
        h3 {
            font-size: 1.25em;
        }
        p {
            margin-bottom: 16px;
        }
        pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            margin-bottom: 16px;
            position: relative;
        }
        code {
            background-color: rgba(27,31,35,.05);
            border-radius: 3px;
            font-size: 85%;
            margin: 0;
            padding: .2em .4em;
        }
        ul, ol {
            padding-left: 2em;
            margin-bottom: 16px;
        }
        a {
            color: #0366d6;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .container {
            background-color: #fff;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .container h2 {
            margin-top: 0;
        }
        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: #f6f8fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 14px;
            color: #586069;
        }
        .copy-button:hover {
            background-color: #e1e4e8;
        }
        .copy-success {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #28a745;
            color: #fff;
            padding: 10px 20px;
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .copy-success.show {
            opacity: 1;
        }
    </style>
    <script>
        function copyToClipboard(text) {
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            // Show success message
            const successMessage = document.getElementById('copy-success-message');
            successMessage.classList.add('show');
            setTimeout(() => {
                successMessage.classList.remove('show');
            }, 2000);
        }
    </script>
</head>
<body>
    <div class="container">
        <h1 class="flex-auto min-width-0 mb-2 mb-md-0 mr-0 mr-md-2 gh-header-title">Home</h1>
        <p>欢迎使用 VaPanel, 请查看说明, 如果你有更好的想法，请提至 <a href="https://bbs.vaner.top" target="_blank">bbs.vaner.top</a></p>
    </div>

    <div class="container">
        <h2>Debian10 安装 FAQ</h2>
        <pre><code>sudo sed -i 's/deb.debian.org/mirrors.ustc.edu.cn/g' /etc/apt/sources.list
apt update -y
apt install curl -y
</code><button class="copy-button" onclick="copyToClipboard('sudo sed -i \'s/deb.debian.org/mirrors.ustc.edu.cn/g\' /etc/apt/sources.list\napt update -y\napt install curl -y')">复制</button></pre>
    </div>

    <div class="container">
        <h2>针对 <a href="https://digitalvirt.com/" rel="nofollow">DV</a> Debian 镜像中 127.0.0.1 无法使用的问题。</h2>
        <ul>
            <li>cat /etc/network/interfaces</li>
        </ul>
        <pre><code># network-config
auto lo
iface lo inet loopback
    dns-nameservers 8.8.8.8
    dns-search local

auto eth0
iface eth0 inet static
    address 10.0.11.2
    netmask 255.255.255.0
    gateway 10.0.11.1
</code><button class="copy-button" onclick="copyToClipboard('# network-config\nauto lo\niface lo inet loopback\n    dns-nameservers 8.8.8.8\n    dns-search local\n\nauto eth0\niface eth0 inet static\n    address 10.0.11.2\n    netmask 255.255.255.0\n    gateway 10.0.11.1')">复制</button></pre>
        <ul>
            <li>修改配置为如下，重启服务器即可正常使用了。</li>
        </ul>
        <pre><code># network-config
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
    address 10.0.11.2
    netmask 255.255.255.0
    gateway 10.0.11.1
    dns-nameservers 8.8.8.8
    dns-search local
</code><button class="copy-button" onclick="copyToClipboard('# network-config\nauto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n    address 10.0.11.2\n    netmask 255.255.255.0\n    gateway 10.0.11.1\n    dns-nameservers 8.8.8.8\n    dns-search local')">复制</button></pre>
    </div>

    <div class="container">
        <h2>国内换源</h2>
        <pre><code>bash &lt;(curl -sSL https://gitee.com/SuperManito/LinuxMirrors/raw/main/ChangeMirrors.sh)
</code><button class="copy-button" onclick="copyToClipboard('bash &lt;(curl -sSL https://gitee.com/SuperManito/LinuxMirrors/raw/main/ChangeMirrors.sh)')">复制</button></pre>
    </div>

    <div class="container">
        <h2>登录操作</h2>
        <ol>
            <li>正确登录之后，修改密码，不会在【mw default】显示。</li>
            <li>验证码错误和密码错误，再超过 4 次之后，就会关闭，需要管理员删除特定文件，才能继续登录。</li>
        </ol>
    </div>

    <div class="container">
        <h2>Debian 32 位安装 FAQ</h2>
        <pre><code>//安装 rust
curl https://sh.rustup.rs -sSf | sh 
或
apt install rustc

pip install bcrypt==3.1.3
cd /www/server/mdserver-web &amp;&amp; source bin/activate &amp;&amp; pip install bcrypt==3.1.3

pip install psutil
cd /www/server/mdserver-web &amp;&amp; source bin/activate &amp;&amp; pip install psutil
</code><button class="copy-button" onclick="copyToClipboard('//安装 rust\ncurl https://sh.rustup.rs -sSf | sh \n或\napt install rustc\n\npip install bcrypt==3.1.3\ncd /www/server/mdserver-web &amp;&amp; source bin/activate &amp;&amp; pip install bcrypt==3.1.3\n\npip install psutil\ncd /www/server/mdserver-web &amp;&amp; source bin/activate &amp;&amp; pip install psutil')">复制</button></pre>
    </div>

    <div class="container">
        <h3>进入虚拟环境</h3>
        <pre><code>cd /www/server/mdserver-web &amp;&amp; source bin/activate
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web &amp;&amp; source bin/activate')">复制</button></pre>
    </div>

    <div class="container">
        <h3>手动执行插件</h3>
        <pre><code>cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/swap/index.py status 1.0
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/swap/index.py status 1.0')">复制</button></pre>
        <pre><code>cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/varnish/index.py run_info
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/varnish/index.py run_info')">复制</button></pre>
        <pre><code>cd /www/server/mdserver-web/plugins/php &amp;&amp; /bin/bash install.sh install 74
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web/plugins/php &amp;&amp; /bin/bash install.sh install 74')">复制</button></pre>
        <pre><code>cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/mysql/index.py fix_db_access
cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/mysql-apt/index.py fix_db_access
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/mysql/index.py fix_db_access\ncd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/mysql-apt/index.py fix_db_access')">复制</button></pre>
        <pre><code>cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/mysql/index.py do_full_sync {"db":"ALL","sign":"","begin":0} 
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/mysql/index.py do_full_sync {\"db\":\"ALL\",\"sign\":\"\",\"begin\":0}')">复制</button></pre>
    </div>

    <div class="container">
        <h3>DEBUG[PHP]</h3>
        <pre><code>cd /www/server/mdserver-web/plugins/php &amp;&amp; sh -x /www/server/mdserver-web/plugins/php/versions/56/install.sh install
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web/plugins/php &amp;&amp; sh -x /www/server/mdserver-web/plugins/php/versions/56/install.sh install')">复制</button></pre>
        <pre><code>cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/php/index.py install_lib 53 {"name":"intl","version":"53","type":"1"}
</code><button class="copy-button" onclick="copyToClipboard('cd /www/server/mdserver-web &amp;&amp; python3 /www/server/mdserver-web/plugins/php/index.py install_lib 53 {\"name\":\"intl\",\"version\":\"53\",\"type\":\"1\"}')">复制</button></pre>
    </div>

    <div class="container">
        <h2>负载简述</h2>
        <p>负载状态图表中百分比的含意：</p>
        <ul>
            <li>50% 以下 - 此时服务器正以低负载状态运行</li>
            <li>50 ~ 90% - 服务器负载正常，用户的请求可以及时得到服务器响应</li>
            <li>90% ~ 100% - 表示服务器资源已耗尽，无法及时响应用户请求，需尽快排查项目是否运行异常，或增加服务器配置。</li>
        </ul>
        <p>影响服务器负载的因素：</p>
        <ol>
            <li>CPU 使用率</li>
            <li>线程数量</li>
            <li>IO 使用率</li>
            <li>swap 使用率</li>
            <li>因宿主机负载过高导致资源分配不足</li>
        </ol>
    </div>

    <!-- Copy success message -->
    <div id="copy-success-message" class="copy-success">
        复制成功！
    </div>
</body>
</html>
